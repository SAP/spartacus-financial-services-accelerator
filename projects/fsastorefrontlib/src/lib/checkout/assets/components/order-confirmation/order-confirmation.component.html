<ng-container *ngIf="order$ | async as order; else loading">
    <!-- {{order|json}} -->
    <div class="center1400">
        <h2>Thank you! Your policy request has been submitted</h2>
        <ng-container *ngIf="order.deliveryOrderGroups?.length > 0; else noQuotes">
            <div class="accordion">
                <div class="row no-gutters section-header__heading">
                    <div class="col-12 col-md-2 accordion-header__icon">
                        <span *ngIf="order.deliveryOrderGroups[0]?.entries[0]?.product?.images?.length > 0"
                            class="images images__wrapper images__wrapper--size">
                            <img class="images__size"
                                [src]="getBaseUrl() + order.deliveryOrderGroups[0]?.entries[0]?.product?.images[3]?.url" />
                        </span>
                    </div>
                    <div class="col-12 col-md-8 accordion-header__text">
                        Your {{ order?.entries[0]?.product?.defaultCategory?.name }}
                    </div>
                    <div class="col-12 col-md-3 col-md-2 accordion-header__details">
                        <div class="accordion-header__id"></div>
                        <div class="accordion-header__expiry-date"></div>
                    </div>
                </div>
                <div #ref>
                    <ng-container *ngIf="(order?.insuranceQuote?.quoteDetails | json) !== '{}'">
                        <fsa-accordion-item [opened]="true" [title]="'General Details'">
                            <div class="container">
                                <div class="row justify-content-center">
                                    <ul class="col-12 accordion--list">
                                        <ng-container *ngFor="let item of order?.insuranceQuote?.quoteDetails?.entry">
                                            <li class="accordion--list-item row">
                                                <div class="col-6">
                                                    {{ item.key }}
                                                </div>
                                                <div class="col-6 value notice notice--dark">
                                                    {{ item.value }}
                                                </div>
                                            </li>
                                        </ng-container>
                                    </ul>
                                    <div class="col-12 col-md-6">
                                        <a href="#" type="submit"
                                            class="secondary-button secondary-button__default">Edit</a>
                                    </div>
                                </div>
                            </div>
                        </fsa-accordion-item>
                    </ng-container>
                </div>
                <fsa-accordion-item [opened]="ref.children.length > 0 ? false : true" [title]="'What\'s Included'">
                    <div class="container">
                        <div class="row justify-content-center">
                            <ul class="col-12 accordion--list">
                                <ng-container
                                    *ngFor="let item of (order.deliveryOrderGroups[0]?.entries)[0]?.product?.price?.oneTimeChargeEntries">
                                    <li class="accordion--list-item row">
                                        <div class="col-6">
                                            {{ item.billingTime.name }}
                                        </div>
                                        <div class="col-6 value notice notice--dark">
                                            {{ item.price.formattedValue }}
                                        </div>
                                    </li>
                                </ng-container>
                            </ul>
                            <div class="col-12 col-md-6">
                                <a href="#" type="submit" class="secondary-button secondary-button__default">Edit</a>
                            </div>
                        </div>
                    </div>
                </fsa-accordion-item>
                <fsa-accordion-item [title]="'Added by you'">
                    <div class="container">
                        <div class="row justify-content-center">
                            <ul class="col-12 accordion--list">
                                <ng-container *ngFor="let item of order.deliveryOrderGroups[0]?.entries">
                                    <li class="accordion--list-item row">
                                        <div class="col-12"> {{ item.product?.name }} </div>
                                    </li>
                                </ng-container>
                            </ul>
                            <div class="col-12 col-md-6">
                                <a href="#" type="submit" class="secondary-button secondary-button__default">Edit</a>
                            </div>
                        </div>
                    </div>
                </fsa-accordion-item>
                <ng-container
                    *ngIf="order.deliveryOrderGroups[0]?.entries.length > 0 && order.deliveryOrderGroups[0]?.entries[0]?.product?.investments">
                    <fsa-accordion-item [title]="'Investments Details'">
                        <div class="container">
                            <div class="row justify-content-center">
                                <ul class="col-12 accordion--list">
                                    <ng-container *ngFor="let item of order.deliveryOrderGroups[0]?.entries">
                                        <ng-container *ngFor="let investmentDetail of item.product?.investments">
                                            <li class="accordion--list-item row">
                                                <div class="col-12">
                                                    {{investmentDetail.investmentType?.fundName}}:
                                                    {{investmentDetail.distributionPercentage}}% </div>
                                                <div class="col-12">ISIN: {{investmentDetail.investmentType?.isin}}
                                                </div>
                                                <div class="col-12">5 Year Perfomance:
                                                    {{investmentDetail.investmentType?.fiveYearPerformance}} </div>
                                                <div class="col-12">Risk & Returning Rating:
                                                    {{investmentDetail.investmentType?.riskReturningRating}}</div>
                                            </li>
                                        </ng-container>
                                    </ng-container>
                                </ul>
                                <div class="col-12 col-md-6">
                                    <a href="#" type="submit"
                                        class="secondary-button secondary-button__default">Edit</a>
                                </div>
                            </div>
                        </div>
                    </fsa-accordion-item>
                </ng-container>
                <fsa-accordion-item [title]="'Personal Details'">
                    <div class="container">
                        <div class="row justify-content-center">
                            <ul class="col-12 accordion--list">
                                <li class="accordion--list-item row">
                                    <div class="col-12">
                                        <!-- Needs to have dynamic heading value -->
                                        <h3 class="accordion-item__list-title">Policy Holder</h3>
                                        <ul class="accordion-item__list">
                                            <li class="accordion-item__list-item">
                                                Mrs. Test Tester
                                            </li>
                                            <li class="accordion-item__list-item">
                                                Phone Number: 323535
                                            </li>
                                            <li class="accordion-item__list-item">
                                                Email Address: donna@moore.com
                                            </li>
                                            <li class="accordion-item__list-item">
                                                Address Line 1: sfsdfsdf
                                            </li>
                                            <li class="accordion-item__list-item">City: sffsd</li>
                                            <li class="accordion-item__list-item">
                                                Postcode: 3423423
                                            </li>
                                            <li class="accordion-item__list-item">
                                                Country: France
                                            </li>
                                        </ul>
                                    </div>
                                </li>
                            </ul>
                            <div class="col-12 col-md-6">
                                <a href="#" type="submit" class="secondary-button secondary-button__default">Edit</a>
                            </div>
                        </div>
                    </div>
                </fsa-accordion-item>
            </div>
        </ng-container>
    </div>
</ng-container>
<ng-template #noQuotes>
    <h3>Please, fuck off now...</h3>
</ng-template>
<ng-template #loading>
    <cx-spinner></cx-spinner>
</ng-template>
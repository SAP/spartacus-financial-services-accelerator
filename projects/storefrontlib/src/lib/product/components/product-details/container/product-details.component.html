<ng-container *ngIf="(product$ | async) as product">
  <ng-container *cxOutlet="outlets.PAGE">
    <ng-container *cxOutlet="outlets.SUMMARY">
      <cx-product-summary class="container" [product]="product">
        <cx-product-images [product]="product"></cx-product-images>
      </cx-product-summary>
    </ng-container>

    <ng-container *cxOutlet="outlets.TAB">
      <div class="cx-product-details__tabset" #tabSetWrapper>
        <ngb-tabset justify="center" #tabSet>
          <ngb-tab>
            <ng-template ngbTabTitle>
              <div class="cx-product-details__tab-title">Product Details</div>
            </ng-template>
            <ng-template ngbTabContent>
              <div class="cx-product-details__tab-section">
                <ng-container *cxOutlet="outlets.DESCRIPTION">
                  <div class="container">
                    <p [innerHTML]="product?.description"></p>
                  </div>
                </ng-container>
              </div>
            </ng-template>
          </ngb-tab>
          <ngb-tab>
            <ng-template ngbTabTitle>
              <div class="cx-product-details__tab-title">Specs</div>
            </ng-template>
            <ng-template ngbTabContent>
              <div class="cx-product-details__tab-section">
                <ng-container *cxOutlet="outlets.SPECIFICATIONS">
                  <div class="container">
                    <cx-product-attributes
                      [product]="product"
                    ></cx-product-attributes>
                  </div>
                </ng-container>
              </div>
            </ng-template>
          </ngb-tab>

          <ngb-tab id="reviews">
            <ng-template ngbTabTitle>
              <div class="cx-product-details__tab-title">
                Reviews ({{ product?.numberOfReviews }})
              </div>
            </ng-template>
            <ng-template ngbTabContent>
              <div class="cx-product-details__tab-section">
                <ng-container *cxOutlet="outlets.REVIEWS">
                  <div class="container">
                    <cx-product-reviews
                      [(isWritingReview)]="isWritingReview"
                      [product]="product"
                    ></cx-product-reviews>
                  </div>
                </ng-container>
              </div>
            </ng-template>
          </ngb-tab>
          <ngb-tab>
            <ng-template ngbTabTitle>
              <div class="cx-product-details__tab-title">Shipping</div>
            </ng-template>
            <ng-template ngbTabContent>
              <div class="cx-product-details__tab-section">
                <ng-container *cxOutlet="outlets.SHIPPING">
                  <div class="container">
                    <ng-container
                      cxComponentWrapper
                      componentType="CMSTabParagraphComponent"
                      componentUid="deliveryTab"
                    ></ng-container>
                    <cx-dynamic-slot position="Tabs"></cx-dynamic-slot>
                  </div>
                </ng-container>
              </div>
            </ng-template>
          </ngb-tab>
        </ngb-tabset>
      </div>

      <!-- Mobile accordion -->
      <div class="cx-product-details__tabset-mobile">
        <ngb-accordion #acc="ngbAccordion">
          <ngb-panel id="toggle-1" title="Product Details">
            <ng-template ngbPanelContent>
              <ng-container *cxOutlet="outlets.DESCRIPTION">
                <p [innerHTML]="product?.description"></p>
              </ng-container>
            </ng-template>
          </ngb-panel>
          <ngb-panel id="toggle-2" title="Specs">
            <ng-template ngbPanelContent>
              <ng-container *cxOutlet="outlets.SPECIFICATIONS">
                <cx-product-attributes
                  [product]="product"
                ></cx-product-attributes>
              </ng-container>
            </ng-template>
          </ngb-panel>
          <ngb-panel id="toggle-3" title="Reviews">
            <ng-template ngbPanelContent>
              <ng-container *cxOutlet="outlets.REVIEWS">
                <cx-product-reviews
                  [(isWritingReview)]="isWritingReview"
                  [product]="product"
                ></cx-product-reviews>
              </ng-container>
            </ng-template>
          </ngb-panel>
          <ngb-panel id="toggle-4" title="Shipping">
            <ng-template ngbPanelContent>
              <ng-container *cxOutlet="outlets.SHIPPING">
                <div class="container">
                  <div
                    cxComponentWrapper
                    componentType="CMSTabParagraphComponent"
                    componentUid="deliveryTab"
                  ></div>
                  <cx-dynamic-slot position="Tabs"></cx-dynamic-slot>
                </div>
              </ng-container>
            </ng-template>
          </ngb-panel>
        </ngb-accordion>
      </div>
    </ng-container> </ng-container
></ng-container>

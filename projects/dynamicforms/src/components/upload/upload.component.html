<ng-container *ngIf="group">
  <div class="dynamic-field" [formGroup]="group" [hidden]="config.hidden">
    <div class="form-group">
      <label class="col-form-label">
        {{ label }}
        <ng-container *ngIf="!config.required">
          {{ 'forms.optional' | cxTranslate }}
        </ng-container>
      </label>
      <p>
        {{ 'forms.maxFileSize' | cxTranslate }}
        {{ convertFileSize(config.maxFileSize) }}
      </p>
      <div class="input-group">
        <div class="custom-file">
          <input
            #uploadFeature
            type="file"
            class="custom-file-input"
            [attr.aria-describedby]="config.name"
            [attr.name]="config.name"
            [attr.multiple]="config.multiple ? config.multiple : null"
            [attr.accept]="config.accept"
          />
          <!-- <input
            type="file"
            class="form-control-file"
            [attr.aria-describedby]="config.name"
            [attr.name]="config.name"
            [attr.multiple]="config.multiple ? config.multiple : null"
            [attr.accept]="config.accept"
          /> -->
          <input
            type="hidden"
            [attr.name]="config.name + '_hidden'"
            [formControlName]="config.name"
          />
          <label class="custom-file-label" [attr.for]="config.name">{{
            'forms.chooseFile' | cxTranslate
          }}</label>
        </div>
      </div>

      <ng-container *ngIf="fileList.length > 0">
        <ul>
          <li class="pt-3" *ngFor="let file of fileList; let i = index">
            <span>{{ file?.name }}:</span>
            <span class="pl-3"> {{ convertFileSize(file.size) }}</span>
            <span
              class="pl-3 close"
              type="button"
              (click)="removeFile(i, uploadFeature)"
              >&times;</span
            >

            <!-- <div class="progress">
              <div
                class="progress-bar"
                [style.width]="'100%'"
                role="progressbar"
                [attr.aria-valuenow]="'100%'"
                aria-valuemin="0"
                aria-valuemax="100"
              >
                100%
              </div>
            </div> -->
          </li>
        </ul>
      </ng-container>
    </div>
    <cx-error-notice
      [warn]="group.controls[config.name]"
      [parentConfig]="config"
    ></cx-error-notice>
  </div>
</ng-container>
